<odoo>
  <data>
    <!-- 
      Agregando talla de:
        zapatos
        camisas
        pantalones

      a la ficha de empleado
    -->
        <record id="view_hr_employee_form" model="ir.ui.view">
   	        <field name="name">view.hr.employee.form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
              <xpath expr="//page[@name='hr_settings']" position='after'>
                <page name = 'uniformes' string='Uniformes'>
                      <group name="group_left" > 
                        <group  string="Tallas de uniforme">

                            <field name="shoes" >  </field> <separator/>
                            <field name="zone3" ></field>
                            <field name="zone4"></field>
                            <field name="zone5"></field>
                        </group>
                        </group>
                </page>
              </xpath>
            </field>
        </record>

    <!-- 
      Agregando informacion de: 
        alergias
        vacunas 
        tipo de sangre 
        
      a la ficha de empleado
    -->

        <record id="view_hr_employee_form2" model="ir.ui.view">
   	        <field name="name">view.hr.employee.form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
              <xpath expr="//page[@name='hr_settings']" position='after'>
                <page name='Rmedico' string='Información Médica'>
                      <group name="group_left" > 
                        <group string="Alergias">             
                            <field name="allergy_type"></field> 
                            <field 
                              name="alergia" 
                              string="Indica la(s) alergia(s) " 
                              attrs="{'invisible' : [('allergy_type','=','false' )]}" 
                              options="{'no_create_edit':True, 'no_create': True, 'no_open':True}"> 
                            </field>
                        </group>
                        
                        <group string="Grupo sanguíneo">
                          <field name="zone7" ></field>
                        </group>     
                      </group> 
                        <group name="group_right">
                            <group string="Vacuna contra covid-19"> <separator/>
                                <field name="vacuna" string="Se encuentra vacunado" widget="radio">  </field>
                              
                                <field name="dosis" string="Nombre de la vacuna:" attrs="{'invisible' : [('vacuna', 'not in', ['S','Si'])]}" />
                                <field name="ndosis" string="Numero de dosis"  attrs="{'invisible' : [('vacuna', 'not in', ['S','Si'])]}"/>
                              
                            </group>  
                        </group>
                </page>
              </xpath>
            </field>
        </record>

        <!-- 
          Agregando campo supermercado para posteriormente filtrar
          en el calculo masivo de nomina
        -->
        <record id="view_hr_employee_form_supermarket_field" model="ir.ui.view">
            <field name="name">view.hr.employee.form</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
              <xpath expr="//field[@name='department_id']" position='before'>
                <field name="supermarket"></field>
              </xpath>
            </field>
        </record>

        <!--
          Filtrar empleados por supermercado
        -->

        <record id="hr_employee_supermarket_filter" model="ir.ui.view">
          <field name="name">hr.employee.supermarket.filter</field>
          <field name="model">hr.employee</field>
          <field name="inherit_id" ref="hr.view_employee_filter"></field>
          <field name="arch" type="xml">
            <xpath expr="//filter[@name='group_company']" position="after">
              <filter name="group_supermarket" domain="[]" context="{'group_by':'supermarket'}" string="Supermercado"></filter>
            </xpath>
          </field>
        </record>

        <!--
          Accion para  el calculo masivo de nomina
        -->
        <record id="action_calculate_massive_payroll" model="ir.actions.server">
          <field name="name">Cálcular Nóminas</field>
          <!-- 
            El id de un modelo sigue la sintaxis 
            model_nombreModulo_nombreModelo
          -->
          <field name="model_id" ref="model_hr_employee"/>
          <field name="binding_model_id" ref="hr.model_hr_employee"/>
          <field name="state">code</field>
          <field name="code">
                  if records:
                    records.calculate_massive_payroll()
          </field>
        </record>

        <!--
          Transicion a la vista de nominas
        -->

        <record id="hr_employee_action_move_to_payslips" model="ir.actions.act_window">
          <field name="name">Ir a nóminas</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">hr.payslip</field>
          <field name="domain">[]</field>
          <field name="view_type">tree</field>
          <field name="view_mode">form,tree</field>
          <field name="view_id" ref="hr_payroll.view_hr_payslip_tree"/>
          <field name="binding_model_id" ref="hr.model_hr_employee"/>
        </record>



        
      
  </data>
</odoo>